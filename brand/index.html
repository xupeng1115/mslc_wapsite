 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
	<title>马上理财-开启财富之门</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <meta content="email=no" name="format-detection" />
    <link href="css/swiper.min.css" rel="stylesheet" type="text/css">
    <link href="css/common.css?date=1208" rel="stylesheet" type="text/css">
</head>

<body>
<div class="page-landscape">
    <div class="loading">
        <div class="progress"></div>
        <div class="load-area">
            <p class="load-logo"></p>
            <p class="percent">0%</p>
        </div>
    </div>
    <div class="swiper-container">
        <div class="swiper-wrapper">  
            <div class="swiper-slide">
                <div class="page page1">
                    <div class="content">
                        <p class="house"></p>
                        <p class="circular"></p>
                        <p class="triangle"></p>
                        <p class="p1-t1"></p>
                        <p class="p1-t2"></p>
                        <p class="p1-t3"></p>
                        <p class="p1-t4"></p>
                        <p class="p1-t5"></p>
                        <p class="p1-t6"></p>
                    </div>
                    <p class="p1-logo"></p>
                    <p class="p1-arrow"></p>
                    <p class="p1-tip">投资有风险 | 理财需谨慎</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="page page2">
                    <!-- <div class="content">
                        <p class="p2-round1"></p>
                        <p class="p2-round2"></p>
                        <p class="p2-bg"></p>
                        <p class="p2-t1-line line"></p>
                        <p class="p2-t1"></p>
                        <p class="p2-t2-line line"></p>
                        <p class="p2-t2"></p>
                        <p class="p2-t3-line line"></p>
                        <p class="p2-t3"></p>
                        <p class="p2-t4-line line"></p>
                        <p class="p2-t4"></p>
                        <p class="p2-t5-line line"></p>
                        <p class="p2-t5"></p>
                        <p class="p2-t6-line line"></p>
                        <p class="p2-t6"></p>
                        <p class="p2-t7-line line"></p>
                        <p class="p2-t7"></p>
                        <p class="p2-t8"></p>
                        <p class="p2-manager-line line"></p>
                        <p class="p2-manager"></p>
                        <p class="p2-bank-line line"></p>
                        <p class="p2-bank"></p>
                        <p class="p2-hand"></p>
                        <p class="p2-logo"></p>
                        <p class="p2-click"></p>
                    </div> -->
                    <div class="content">
                        <p class="p2-large-bg"></p>
                        <p class="p2-large-border">
                            <span class="p2-small-bank"></span>
                            <span class="p2-small-user"></span>
                            <span class="p2-small-diamond"></span>
                        </p>
                        <p class="p2-large-logo"></p>
                        <p class="p2-large-bank"></p>
                        <p class="p2-large-manager"></p>
                        <p class="p2-large-jmx">
                            <span class="p2-small-border"></span>
                        </p>
                        <p class="p2-large-t1"></p>
                        <p class="p2-large-t2"></p>
                        <p class="p2-large-t3"></p>
                        <p class="p2-large-t4"></p>
                        <p class="p2-large-t5"></p>
                        <p class="p2-large-t6"></p>
                        <p class="p2-hand"></p>
                        <p class="p2-click"></p>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="page page3">
                    <p class="p3-top"></p>
                    <p class="p3-bottom"></p>
                    <p class="p3-user1"></p>
                    <p class="p3-user2"></p>
                    <p class="p3-manager1"></p>
                    <p class="p3-manager2"></p>
                    <p class="p3-t1"></p>
                    <p class="p3-t2"></p>
                    <p class="p3-t3"></p>
                    <p class="p3-t4"></p>
                    <p class="p3-time"></p>
                    <p class="p3-hand"></p>
                    <p class="p3-click"></p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="page page4">
                    <p class="p4-t1"></p>
                    <p class="p4-t2"></p>
                    <div class="content">
                        <p class="p4-circular"></p>
                        <p class="p4-light"></p>
                        <p class="p4-logo"></p>
                        <p class="p4-tab"></p>
                        <p class="p4-hand1"></p>
                        <p class="p4-download p4-download1"></p>
                    </div>
                    <p class="p4-btn"></p>
                    <p class="p4-hand2"></p>
                    <p class="p4-download p4-download2"></p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="page-portrait">
    <div class="vertical-module flex">
        <div class="vertical-cont">
            <p class="vertical-img rotate90"><img src="img/index.png" alt=""></p>
            <p class="vertical-txt">为了获得更好的体验，请使用竖屏浏览</p>
        </div>
    </div>
</div>
<div class="music" id="music"><img src="img/music.png"></div>
<audio src="" loop="loop" id="audio"></audio>
<script src="js/jquery-2.1.4.min.js" type="text/javascript"></script>
<script src="js/swiper.jquery.min.js"></script>
<script src="js/common.js"></script>
<script type="text/javascript">
var $swiperContainer = $(".swiper-container");
var $page1 = $(".page1"),$page2 = $(".page2"),$page3 = $(".page3"),$page4 = $(".page4");
var timer1=null,timer2=null,timer3=null;
var houseTimer = null,toNextTimer = null;
var prev;
var bTouch = false;


var swiper = new Swiper('.swiper-container', {
    direction : 'vertical',
    speed:300,
    observeParents:true,
    onTouchStart:function(){
        clearTimeout(toNextTimer);
        bTouch = true;
    },
    onTouchEnd:function(){
        bTouch = false;
    },
    onTransitionStart:function(swiper){
        clearTimeout(toNextTimer);
        prev = swiper.previousIndex;
        resetAnimate(swiper.previousIndex);
    },
    onTransitionEnd:function(swiper){
        if(swiper.activeIndex!=prev){
            resetAnimate(swiper.activeIndex);
            switch (swiper.activeIndex){
                case 0:
                    page1Animate();
                    break;
                case 1:
                    page2Animate();
                    break;
                case 2:
                    page3Animate();
                    break;
                case 3:
                    page4Animate();
                    break;  
            } 
        }
        
    }
});

//loading
function loading(){
    sedRequest(publicObj.nameArr[0]);
    var $progress = $(".progress");
    var $percent = $(".percent");
    var calcPercent=null;
    // var demoImgArray = ['img/index.png', 'img/loading-logo.png','img/hand.png','img/p1-arrow.png','img/p1-logo.png','img/p1-house.png','img/p1-triangle.png','img/p1-t1.png','img/p1-t2.png','img/p1-t3.png','img/p1-t4.png','img/p1-t5.png','img/p1-t6.png','img/p2-bg.png','img/p2-bank.png','img/p1-logo.png','img/p2-manager.png','img/p2-t1.png','img/p2-t2.png','img/p2-t3.png','img/p2-t4.png','img/p2-t5.png','img/p2-t6.png','img/p2-t7.png','img/p2-t8.png','img/p3-top.png','img/p3-bottom.png','img/p3-t1.png','img/p3-t2.png','img/p3-t3.png','img/p3-t4.png','img/p3-time.png','img/p3-user.png','img/p3-manager.png','img/p4-btn.png','img/p4-hand.png','img/p4-light.png','img/p4-logo.png','img/p4-t1.png','img/p4-t2.png','img/p4-tab.png'];

    var demoImgArray = ['img/index.png', 'img/loading-logo.png','img/hand.png','img/p1-arrow.png','img/p1-logo.png','img/p1-house.png','img/p1-triangle.png','img/p1-t1.png','img/p1-t2.png','img/p1-t3.png','img/p1-t4.png','img/p1-t5.png','img/p1-t6.png','img/p2-bg.png','img/p2-bank.png','img/p1-logo.png','img/p2-large-t1.png','img/p2-large-t2.png','img/p2-large-t3.png','img/p2-large-t4.png','img/p2-large-t5.png','img/p2-large-t6.png','img/p2-large-logo.png','img/p2-large-bg.png','img/p2-large-bank.png','img/p2-large-manager.png','img/p2-large-jmx.png','img/p2-small-bank.png','img/p2-small-user.png','img/p2-small-diamond.png','img/p3-top.png','img/p3-bottom.png','img/p3-t1.png','img/p3-t2.png','img/p3-t3.png','img/p3-t4.png','img/p3-time.png','img/p3-user.png','img/p3-manager.png','img/p4-btn.png','img/p4-hand.png','img/p4-light.png','img/p4-logo.png','img/p4-t1.png','img/p4-t2.png','img/p4-tab.png'];

    //判断单个图片是否加载完成
    function loadImage(url, callback) { 
        var img = new Image(); 
        img.src = url; 
        if(img.complete) { 
            callback(url); 
            return; 
        } 
        img.onload = function () { 
            callback(url);
        }; 
    }

    function preload(demoImgArray) {
        var increment = Math.floor(100 / demoImgArray.length);
        $(demoImgArray).each(function() {
            loadImage(this,function(){
                $progress.animate({
                    width: "+=" + increment + "%"
                }, 20);
            })
        });
        calcPercent = setInterval(function() {
            
            var txt = Math.floor(($progress.width() / $('body').width()) * 100) + '%';
            $percent.text(txt);
        });
    }

    preload(demoImgArray);

    $(window).load(function() {
        setTimeout(function(){
            clearInterval(calcPercent);
            $percent.text('100%');
            setTimeout(function(){
                $(".loading").hide();
                page1Animate();
                loadAudio();
            },200)
        },200);
    });
}

//page1动画
function page1Animate(){
    sedRequest(publicObj.nameArr[1]);
    offSwiper();
    var $circular = $page1.find(".circular");
    var $house = $page1.find(".house");
    var $triangle = $page1.find(".triangle");
    var $p1T1 = $page1.find(".p1-t1");
    var $p1T2 = $page1.find(".p1-t2");
    var $p1T3 = $page1.find(".p1-t3");
    var $p1T4 = $page1.find(".p1-t4");
    var $p1T5 = $page1.find(".p1-t5");
    var $p1T6 = $page1.find(".p1-t6");
    var $p1Logo = $page1.find(".p1-logo");
    var $p1Arrow = $page1.find(".p1-arrow");

    $page1.show(function(){
        $page1.css("opacity","1");
        $circular.addClass('show');
        $house.addClass('show1');
        houseTimer = setTimeout(function(){
            $house.addClass('show2').removeClass('show1');
            $triangle.addClass('show1');
            $p1T1.addClass('show');
            $p1T2.addClass('show');
            $p1T2.one("webkitAnimationEnd",function(){
                $p1T1.css({"opacity":"1","background-color":"#fff"}).addClass('hide');
                $p1T2.css({"opacity":"1","background-color":"#fff"}).addClass('hide');
                $triangle.addClass('show2');
                $p1T3.addClass('show');
                $p1T4.addClass('show');
                $p1T4.one("webkitAnimationEnd",function(){
                    $p1T3.css({"opacity":"1","background-color":"#fff"}).addClass('hide');
                    $p1T4.css({"opacity":"1","background-color":"#fff"}).addClass('hide');
                    $triangle.addClass('show3');
                    $p1T5.addClass('show');
                    $p1T6.addClass('show');
                    $p1Logo.addClass('show');
                    $p1Arrow.addClass('show');
                    $p1Logo.one("webkitAnimationEnd",function(){
                        toNext();
                    })
                })
            })
        },1000)

    });
}

//page2动画旧版
// function page2Animate(){
//     sedRequest(publicObj.nameArr[2]);
//     offSwiper();
//     var $p2Bg = $page2.find(".p2-bg");
//     var $p2Logo = $page2.find(".p2-logo");
//     var $p2BankLine = $page2.find(".p2-bank-line");
//     var $p2Bank = $page2.find(".p2-bank");
//     var $p2ManagerLine = $page2.find(".p2-manager-line");
//     var $p2Manager = $page2.find(".p2-manager");
//     var $p2Hand = $page2.find(".p2-hand");
//     var $p2T1 = $page2.find(".p2-t1");
//     var $p2T1Line = $page2.find(".p2-t1-line");
//     var $p2T2 = $page2.find(".p2-t2");
//     var $p2T2Line = $page2.find(".p2-t2-line");
//     var $p2T3 = $page2.find(".p2-t3");
//     var $p2T3Line = $page2.find(".p2-t3-line");
//     var $p2T4 = $page2.find(".p2-t4");
//     var $p2T4Line = $page2.find(".p2-t4-line");
//     var $p2T5 = $page2.find(".p2-t5");
//     var $p2T5Line = $page2.find(".p2-t5-line");
//     var $p2T6 = $page2.find(".p2-t6");
//     var $p2T6Line = $page2.find(".p2-t6-line");
//     var $p2T7 = $page2.find(".p2-t7");
//     var $p2T7Line = $page2.find(".p2-t7-line");
//     var $p2T8 = $page2.find(".p2-t8");
//     var $p2Hand = $page2.find(".p2-hand");
//     var $p2Round1 = $page2.find(".p2-round1");
//     var $p2Round2 = $page2.find(".p2-round2");
//     var $p2Click = $page2.find(".p2-click");

//     $p2Bg.addClass('show');
//     $p2Bg.one("webkitAnimationEnd",function(){
//         $p2Logo.addClass('show');
//         $p2Logo.one("webkitAnimationEnd",function(){
//             $p2T1Line.addClass('show');
//             $p2T1.addClass('show');
//             $p2T2Line.addClass('show');
//             $p2T2.addClass('show');
//             $p2T3Line.addClass('show');
//             $p2T3.addClass('show');
//             $p2T4Line.addClass('show');
//             $p2T4.addClass('show');
//             $p2T5Line.addClass('show');
//             $p2T5.addClass('show');
//             $p2T6Line.addClass('show');
//             $p2T6.addClass('show');
//             $p2Round1.addClass('show');
//             $p2Round2.addClass('show');
//             $p2Round2.one("webkitAnimationEnd",function(){
//                 $p2BankLine.addClass('show');
//                 $p2Bank.addClass('show');
//                 $p2ManagerLine.addClass('show');
//                 $p2ManagerLine.one("webkitAnimationEnd",function(){
//                     $p2Manager.addClass('show');
//                     $p2T7Line.addClass('show');
//                     $p2T7.addClass('show');
//                     $p2T7.one("webkitAnimationEnd",function(){
//                         $p2T8.addClass('show');
//                         $p2T8.one("webkitAnimationEnd",function(){
//                             $p2Hand.addClass('show');

//                             $p2Click.on("touchend",function(e){
//                                 clearTimeout(toNextTimer);
//                                 e.stopPropagation();
//                                 swiper.slideNext();
//                             })
//                             toNext();
//                         })
//                     })
                      
//                 })
                
//             })
//         })
//     })
// }

//page2动画新版
function page2Animate(){
    sedRequest(publicObj.nameArr[2]);
    offSwiper();
    var $p2LargeBg = $page2.find(".p2-large-bg");
    var $p2LargeLogo = $page2.find(".p2-large-logo");
    var $p2LargeBank = $page2.find(".p2-large-bank");
    var $p2LargeManager = $page2.find(".p2-large-manager");
    var $p2LargeJmx = $page2.find(".p2-large-jmx");
    var $p2LargeBorder = $page2.find(".p2-large-border");
    var $p2LargeT1 = $page2.find(".p2-large-t1");
    var $p2LargeT2 = $page2.find(".p2-large-t2");
    var $p2LargeT3 = $page2.find(".p2-large-t3");
    var $p2LargeT4 = $page2.find(".p2-large-t4");
    var $p2LargeT5 = $page2.find(".p2-large-t5");
    var $p2LargeT6 = $page2.find(".p2-large-t6");
    var $p2SmallBank = $page2.find(".p2-small-bank");
    var $p2SmallUser = $page2.find(".p2-small-user");
    var $p2SmallDiamond = $page2.find(".p2-small-diamond");
    var $p2Hand = $page2.find(".p2-hand");
    var $p2smallBorder = $page2.find(".p2-small-border");
    var $p2Click = $page2.find(".p2-click");

    $p2LargeBg.addClass('show1');
    $p2LargeBg.one("webkitAnimationEnd",function(){
        $p2LargeBg.addClass('show2');
        $p2LargeLogo.addClass('show');
        $p2LargeBank.addClass('show');
        $p2LargeManager.addClass('show');
        $p2LargeJmx.addClass('show');
        $p2LargeBorder.addClass('show');
        $p2SmallDiamond.addClass('show');
        $p2SmallBank.addClass('show');
        $p2SmallUser.addClass('show');
        $p2SmallUser.one("webkitAnimationEnd",function(){
            $p2LargeBorder.addClass('show2');
            $p2LargeT1.addClass('show');
            $p2LargeT2.addClass('show');
            $p2LargeT3.addClass('show');
            $p2LargeT4.addClass('show');
            $p2LargeT5.addClass('show');
            $p2LargeT6.addClass('show');
            $p2Hand.addClass('show');
            $p2smallBorder.addClass('show');
            $p2LargeT6.one("webkitAnimationEnd",function(){
                $p2Click.on("touchend",function(e){
                    clearTimeout(toNextTimer);
                    e.stopPropagation();
                    swiper.slideNext();
                })
                toNext(); 
            })
        })
    })
    
}

//page3动画
function page3Animate(){
    sedRequest(publicObj.nameArr[3]);
    offSwiper();
    var $p3Top = $page3.find(".p3-top");
    var $p3Bottom = $page3.find(".p3-bottom");
    var $p3User1 = $page3.find(".p3-user1");
    var $p3User2 = $page3.find(".p3-user2");
    var $p3Manager1 = $page3.find(".p3-manager1");
    var $p3Manager2 = $page3.find(".p3-manager2");
    var $p3T1 = $page3.find(".p3-t1");
    var $p3T2 = $page3.find(".p3-t2");
    var $p3T3 = $page3.find(".p3-t3");
    var $p3T4 = $page3.find(".p3-t4");
    var $p3Time = $page3.find(".p3-time");
    var $p3Hand = $page3.find(".p3-hand");
    var $p3Click = $page3.find(".p3-click");

    $p3Top.addClass('show');
    $p3Bottom.addClass('show');
    $p3User1.addClass('show');
    $p3T1.addClass('show');
    $p3Manager1.addClass('show');
    $p3T2.addClass('show');
    $p3Manager2.addClass('show');
    $p3T3.addClass('show');
    $p3Time.addClass('show');
    $p3User2.addClass('show');
    $p3T4.addClass('show');
    $p3Hand.addClass('show');
    $p3T4.one("webkitAnimationEnd",function(){
        $p3Click.on("touchend",function(e){
            clearTimeout(toNextTimer);
            e.stopPropagation();
            swiper.slideNext();
        })
        toNext();
    })
}

//page4动画
function page4Animate(){
    sedRequest(publicObj.nameArr[4]);
    offSwiper();
    var $p4T1 = $page4.find(".p4-t1");
    var $p4T2 = $page4.find(".p4-t2");
    var $p4Circular = $page4.find(".p4-circular");
    var $p4Logo = $page4.find(".p4-logo");
    var $p4Light = $page4.find(".p4-light");
    var $p4Hand1 = $page4.find(".p4-hand1");
    var $p4Tab = $page4.find(".p4-tab");
    var $p4Btn = $page4.find(".p4-btn");
    var $p4Hand2 = $page4.find(".p4-hand2");
    var $download = $page4.find(".p4-download");

    $p4T1.addClass('show');
    $p4T2.addClass('show');
    if(publicObj.os=="iphone"){
        $p4Circular.addClass('show2');
    }else{
        $p4Circular.addClass('show1');
    }
    
    $p4Logo.addClass('show');
    $p4Light.addClass('show');
    $p4Hand1.addClass('show');
    $p4Tab.addClass('show');
    $p4Btn.addClass('show');
    $p4Hand2.addClass('show');
    $p4Btn.one("webkitAnimationEnd",function(){
        $download.on("click",function(){
            if(publicObj.isWX){
                location.href="wx.html"+"?id="+publicObj.id;
            }else{
                if(publicObj.os=="iphone" || publicObj.os=="android"){
                    sedRequest(publicObj.nameArr[7]);
                    location.href = publicObj.url2+"/v2/open/api/channel/dl/"+publicObj.os+"/"+publicObj.id;
                }
            }
        })
    })
}

//屏幕无动作，延迟3秒至下一场景
function toNext(){

    if(!bTouch){
        clearTimeout(toNextTimer);
        toNextTimer = setTimeout(function(){
            swiper.slideNext();
        },3000)
    }
    $swiperContainer.on("touchstart",function(event){
        clearTimeout(toNextTimer);
        var touch = event.targetTouches;
        if(!touch){
            clearTimeout(toNextTimer);
            toNextTimer = setTimeout(function(){
                swiper.slideNext();
            },3000)
        }
    })

    $swiperContainer.on("touchend",function(event){
        clearTimeout(toNextTimer);
        toNextTimer = setTimeout(function(){
            swiper.slideNext();
        },3000)
    })
     
}

//解除$swiperContainer的touch事件
function offSwiper(){
    clearTimeout(toNextTimer);
    $swiperContainer.off("touchstart touchend");
}

//重置动画
function resetAnimate(index){
    var $slide = swiper.slides.eq(index).siblings();
    var $p = $slide.find("p");
    var $span = $page2.find("span");
    if(index!=2){
        $(".p3-click").off("touchend");
    }
    if(index!=1){
        $(".p2-click").off("touchend");
    }
    if(index!=3){
        $(".p4-download").off("click");
    }
    clearTimeout(houseTimer);

    $span.removeClass('show hide show1 show2 show3').attr("style","");
    $p.removeClass('show hide show1 show2 show3').attr("style","");
}

//加载音频
function loadAudio(){
    var $audio = $("#audio");
    var audioDom = $audio.get(0);
    var $music = $("#music");
    var src = "img/music.mp3";
    var mp3 = new Audio(src);

    mp3.addEventListener("loadedmetadata", function(){
        $audio.attr("src",src);
        $music.css("opacity","1");
        
        // if(publicObj.os=="android"){
        //     $("body").one("touchstart",function(){
        //         audioDom.play();
        //         $music.addClass('show')
        //     })
        // }else{
        //     $music.addClass('show');
        //     audioDom.play();
        // }

        $music.on("touchstart",function(e){
            e.stopPropagation();
            $("body").off("touchstart");
            $(this).toggleClass('show');
            if($(this).hasClass('show')){
                audioDom.play();
            }else{
                audioDom.pause();
            }
        })
    });
}

loading();
</script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
    var _jsHost = "http://api.mashanglc.com";
    var _title = "指尖的银行柜台，放心的马上理财";
    var _link = location.href;
    var _imgUrl = "http://static.mashanglc.com/html/brand/img/share.png";
    var _desc = "不只是理财，不全是产品。安全靠谱的银行理财等你赚收益。";
    var _weixinJsUrl = _jsHost+'/api/weixinJs';
    var _url = location.href.split('#')[0];
</script>
<script src="js/wx.js"></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?b3ffed60311dfb3303bf3c5115c0dc5a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>
